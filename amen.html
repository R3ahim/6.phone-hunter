<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

</head>
<body class="bg-gray">
    <h2 class="text-center text-success">search yur favorite food</h2>


    <div class="input-group mb-3 w-50 mx-auto">
        <input id="search-field" type="text" class="form-control" placeholder="search the food you want" aria-label="Recipient's username" aria-describedby="button-addon2">
        <button onclick="searchFood()" class="btn btn-outline-secondary" type="button" id="button-search">search</button>
      </div>

      <!-- single meal details -->
      <div id="meal-details" class="w-50 mx-auto">
        <!-- <div class="card" >
           
          </div> -->
      </div>


      <!-- meal search reslult  -->
      <div id="search-result" class="row row-cols-1 row-cols-md-3 g-4"></div>
        
       
      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<!-- <script src="mealdbasync.js"></script> -->
<!-- <script src="mealdb.js"></script> -->
<script>
    const searchFood = () => {
   const searchField = document.getElementById('search-field');
   const searchText = searchField.value ;
 // clear data
   searchField.value='';
   if(searchText == ''){
       alert('please write something')
   }
   else{//    load data 
    const url = `https://www.themealdb.com/api/json/v1/1/search.php?s=${searchText}`
   fetch(url)
   .then(res => res.json())
   .then(data => displaySearchResult(data))}

}


const displaySearchResult = sdl=>{
 const searchresult = document.getElementById('search-result');
 searchresult.textContent = '';
 


 sdl.meals.forEach(meal =>{
    //  console.log(meal);
   const div = document.createElement('div');
  div.classList.add('col');
  div.innerHTML = `
  <div onclick="loadMealDetail(${meal.idMeal})" class="card h-100">
  <img src="${meal.strMealThumb}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">${meal.strMeal}</h5>
    <p class="card-text">${meal.strInstructions.slice(0,200)}</p>
  </div>
</div>
  `;
  searchresult.appendChild(div)
 })
}

const loadMealDetail = mealId =>{
//  console.log(mealId);
 const url =`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`;
 fetch(url)
 .then(res => res.json())
 .then(data => console.log(data))
  
}
</script>
</body>
</html>

 
